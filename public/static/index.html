<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Tab</title>
    <link rel="stylesheet" type="text/css" href="/storage/css/themes2.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100..900&family=Outfit:wght@100..900&display=swap');

      body {
        align-items: center;
        background-color: #0a1d37;
        color: #fff;
        display: flex;
        flex-direction: column;
        font-family:
          Inter,
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
        height: 100vh;
        justify-content: flex-start;
        margin: 0;
        overflow: hidden;
      }

      .god-rays {
        --stripes: repeating-linear-gradient(
          100deg,
          rgb(20 40 60 / 80%) 0%,
          rgb(20 40 60 / 80%) 7%,
          transparent 10%,
          transparent 12%,
          rgb(20 40 60 / 80%) 16%
        );
        --rays: repeating-linear-gradient(
          100deg,
          rgb(30 50 90 / 90%) 10%,
          rgb(20 40 80 / 90%) 15%,
          rgb(30 50 90 / 90%) 20%,
          rgb(20 40 80 / 90%) 25%,
          rgb(30 50 90 / 90%) 30%
        );

        animation: fadeIn 2s ease;
        background-image: var(--stripes), var(--rays);
        background-position:
          50% 50%,
          50% 50%;
        background-size: 300%, 200%;
        height: 550px;
        left: 0;
        mask-image: radial-gradient(ellipse at 100% 0%, white 40%, transparent 70%);
        mask-image: radial-gradient(ellipse at 100% 0%, rgb(255 255 255 / 0%) 40%, transparent 70%);
        pointer-events: none;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: -1;
      }

      .god-rays::after {
        animation: god-rays 40s linear infinite;
        background-attachment: fixed;
        background-image: var(--stripes), var(--rays);
        background-size: 200%, 100%;
        content: '';
        inset: 0;
        mix-blend-mode: difference;
        position: absolute;
      }

      h1 {
        color: #fff;
        font-size: 3rem;
        font-weight: 900;
        letter-spacing: 2px;
        margin-bottom: 20px;
        margin-top: 5px;
        text-shadow:
          0 0 15px rgb(255 255 255 / 30%),
          0 0 20px rgb(255 255 255 / 30%);
        text-transform: none;
        transition: transform 0.3s ease-in-out;
      }

      h1:hover {
        transform: scale(1.05);
      }

      #dynamicParagraph {
        color: #fff;
        cursor: pointer;
        font-size: 1.25rem;
        font-weight: 300;
        margin-top: 5px;
        text-shadow:
          0 0 15px rgb(255 255 255 / 20%),
          0 0 10px rgb(255 255 255 / 10%);
        transition: color 0.3s ease-in-out;
      }

      #dynamicParagraph:hover {
        color: #a0a0a0;
      }

      #search-container {
        margin-top: 20px;
        text-align: center;
      }

      .search-bar-home {
        background-color: #141414;
        border: 2px solid #1e2a47;
        border-radius: 30px;
        color: #fff;
        font-family: Outfit, sans-serif;
        font-size: 16px;
        margin: 0;
        outline: none;
        padding: 12px 18px;
        text-shadow: 0 0 10px rgb(255 255 255 / 20%);
        transition: all 0.3s ease-in-out;
        width: 350px;
      }

      .search-bar-home::placeholder {
        color: #bbb;
        font-size: 14px;
        opacity: 0.8;
      }

      .search-bar-home:focus {
        background-color: #1d2537;
        border-color: #64a6e0;
      }

      .search-button {
        background-color: #1e2a47;
        border: none;
        border-radius: 30px;
        color: white;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
        padding: 10px 20px;
        text-shadow: 0 0 10px rgb(255 255 255 / 20%);
        transition: all 0.3s ease-in-out;
      }

      .search-button:hover {
        background-color: #64a6e0;
        transform: translateY(-2px);
      }

      .search-button i {
        margin-left: 8px;
      }

      #time {
        background-color: rgb(0 0 0 / 50%);
        border-radius: 10px;
        color: white;
        font-family: Outfit, sans-serif;
        font-size: 18px;
        padding: 5px 10px;
        position: fixed;
        right: 10px;
        top: 10px;
      }

      .popup {
        animation: popupFadeIn 0.3s ease-out;
        backdrop-filter: blur(8px);
        background: #0a1d37;
        border: 1px solid rgb(255 255 255 / 30%);
        border-radius: 20px;
        box-shadow:
          0 10px 40px rgb(0 0 0 / 40%),
          inset 0 0 10px rgb(255 255 255 / 5%);
        color: #fff;
        display: none;
        left: 50%;
        max-width: 450px;
        min-width: 400px;
        padding: 35px;
        position: fixed;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
      }

      @keyframes popupFadeIn {
        from {
          opacity: 0;
          transform: translate(-50%, -40%);
        }

        to {
          opacity: 1;
          transform: translate(-50%, -50%);
        }
      }

      .popup h3 {
        color: #fff;
        font-weight: 600;
        letter-spacing: 0.5px;
        margin: 0 0 20px;
      }

      .popup input[type='text'] {
        background: rgb(255 255 255 / 5%);
        border: 1px solid rgb(255 255 255 / 20%);
        border-radius: 10px;
        color: #fff;
        font-family: Outfit, sans-serif;
        margin: 10px 0;
        padding: 12px 15px;
        transition: all 0.3s ease;
        width: 100%;
      }

      .popup input[type='text']:focus {
        background: rgb(255 255 255 / 10%);
        border-color: rgb(255 255 255 / 50%);
        box-shadow: 0 0 10px rgb(255 255 255 / 10%);
        outline: none;
      }

      .popup input[type='file'] {
        color: #fff;
        font-family: Outfit, sans-serif;
        margin: 15px 0;
        width: 100%;
      }

      .popup input[type='file']::-webkit-file-upload-button {
        background: rgb(255 255 255 / 10%);
        border: 1px solid rgb(255 255 255 / 20%);
        border-radius: 10px;
        color: #fff;
        cursor: pointer;
        padding: 8px 15px;
        transition: all 0.3s ease;
      }

      .popup input[type='file']::-webkit-file-upload-button:hover {
        background: rgb(255 255 255 / 20%);
        border-color: rgb(255 255 255 / 40%);
      }

      .popup-buttons {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .popup button {
        background: rgb(255 255 255 / 10%);
        border: 1px solid rgb(255 255 255 / 30%);
        border-radius: 10px;
        color: #fff;
        cursor: pointer;
        font-family: Outfit, sans-serif;
        font-weight: 500;
        padding: 10px 20px;
        transition: all 0.3s ease;
      }

      .popup button:hover {
        background: rgb(255 255 255 / 20%);
        box-shadow: 0 4px 12px rgb(0 0 0 / 20%);
        transform: translateY(-2px);
      }

      .popup button#add-btn {
        background: linear-gradient(135deg, #fff, #e0e0e0);
        border: none;
        color: #0a1d37;
      }

      .popup button#add-btn:hover {
        background: linear-gradient(135deg, #e0e0e0, #fff);
      }

      .add-pin-btn {
        align-items: center;
        background: #fff;
        border: 2px solid #0a1d37;
        border-radius: 50%;
        box-shadow: 0 2px 8px rgb(0 0 0 / 20%);
        color: #0a1d37;
        display: inline-flex;
        height: 35px;
        justify-content: center;
        text-decoration: none;
        transition: all 0.3s ease;
        width: 35px;
      }

      .add-pin-btn:hover {
        background: #e0e0e0;
        box-shadow: 0 4px 12px rgb(0 0 0 / 30%);
        color: #0a1d37;
        transform: scale(1.2);
      }
    </style>
  </head>

  <body>
    <div class="god-rays"></div>
    <br /><br /><br /><br /><br />

    <h1>Pete Prօxy</h1>
    <p id="dynamicParagraph">(TEXT)</p>

    <div id="search-container">
      <form id="uv-form">
        <input id="uv-search-engine" value="https://duckduckgo.com/?q=%s" type="hidden" />
        <input id="uv-address" type="text" class="search-bar-home url-input" placeholder="Search or enter a URL" />
        <button type="submit" class="search-button">SEARCH <i class="fa-solid fa-magnifying-glass"></i></button>
      </form>
      <div class="desc left-margin">
        <p id="uv-error"></p>
        <pre id="uv-error-code"></pre>
      </div>
    </div>

    <div class="pinned-icons" style="display: flex; justify-content: center; align-items: center; gap: 15px">
      <a href="/embed.html#https://tiktok.com" style="display: inline-block">
        <img
          src="/storage/ag/a/tiktok/IMG_5335.png"
          style="width: 30px; height: 30px; border-radius: 50%; transition: transform 0.3s"
          onmouseover="this.style.transform='scale(1.2)'"
          onmouseout="this.style.transform='scale(1)'"
        />
      </a>
      <a href="/embed.html#https://twitch.tv" style="display: inline-block">
        <img
          src="/storage/ag/a/twitch/IMG_5336.png"
          style="width: 30px; height: 30px; border-radius: 50%; transition: transform 0.3s"
          onmouseover="this.style.transform='scale(1.2)'"
          onmouseout="this.style.transform='scale(1)'"
        />
      </a>
      <a href="/embed.html#https://google.com" style="display: inline-block">
        <img
          src="/storage/ag/a/google/IMG_5324.webp"
          style="width: 30px; height: 30px; border-radius: 50%; transition: transform 0.3s"
          onmouseover="this.style.transform='scale(1.2)'"
          onmouseout="this.style.transform='scale(1)'"
        />
      </a>
      <a href="/embed.html#https://now.gg" style="display: inline-block">
        <img
          src="/storage/ag/a/nowgg/IMG_5325.png"
          style="width: 30px; height: 30px; border-radius: 50%; transition: transform 0.3s"
          onmouseover="this.style.transform='scale(1.2)'"
          onmouseout="this.style.transform='scale(1)'"
        />
      </a>
      <a href="#" id="add-pin-btn" class="add-pin-btn">
        <span class="material-icons" style="font-size: 20px">add</span>
      </a>
    </div>

    <div id="add-pin-popup" class="popup">
      <h3>Add New Pin</h3>
      <input type="text" id="pin-url" placeholder="Enter URL (https:// required)" />
      <input type="file" id="pin-image" accept="image/*" />
      <div class="popup-buttons">
        <button id="cancel-btn">Cancel</button>
        <button id="add-btn">Add</button>
      </div>
    </div>

    <div id="time"></div>

    <script src="/petezah/bundle.js" defer></script>
    <script src="/petezah/config.js" defer></script>
    <script src="/petezah/rizz.sw.js" defer></script>
    <script src="/petezah/sw.js" defer></script>
    <script src="/petezah/handler.js" defer></script>

    <script>
      const phrases = [
        'PeteZah best unblocked games site!',
        'https://petezahgames.com',
        'Credits to Brunys and Voucan for proxy help',
        'just had a major update ¯\\_(ツ)_/¯',
        'Roblox should? now work my fellow pizzas',
        'PeteZah-Next coming soon!',
        'IVE EDGED TO Pete Zah -idkiguess',
        "Don't forget to join our Discord server!",
        'Source: trust me bro'
      ];

      const paragraph = document.getElementById('dynamicParagraph');

      function changeText() {
        const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
        paragraph.textContent = randomPhrase;
      }

      paragraph.addEventListener('click', changeText);
      window.onload = changeText;

      function updateTime() {
        const timeElement = document.getElementById('time');
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        timeElement.textContent = `${hours}:${minutes}:${seconds}`;
      }

      setInterval(updateTime, 1000);

      // Updated add pin functionality
      const addPinBtn = document.getElementById('add-pin-btn');
      const popup = document.getElementById('add-pin-popup');
      const addBtn = document.getElementById('add-btn');
      const cancelBtn = document.getElementById('cancel-btn');
      const pinnedIcons = document.querySelector('.pinned-icons');

      // Load saved pins from localStorage on page load
      function loadSavedPins() {
        const savedPins = JSON.parse(localStorage.getItem('pinnedBookmarks') || '[]');
        savedPins.forEach((pin) => {
          createPinElement(pin.url, pin.image);
        });
      }

      // Create pin element
      function createPinElement(url, imageData) {
        const newPin = document.createElement('a');
        newPin.href = `/embed.html#${url}`;
        newPin.style.display = 'inline-block';

        const img = document.createElement('img');
        img.src = imageData;
        img.style.width = '30px';
        img.style.height = '30px';
        img.style.borderRadius = '50%';
        img.style.transition = 'transform 0.3s';
        img.onmouseover = function () {
          this.style.transform = 'scale(1.2)';
        };
        img.onmouseout = function () {
          this.style.transform = 'scale(1)';
        };

        newPin.appendChild(img);
        pinnedIcons.insertBefore(newPin, addPinBtn);
      }

      // Save pin to localStorage
      function savePin(url, imageData) {
        const savedPins = JSON.parse(localStorage.getItem('pinnedBookmarks') || '[]');
        savedPins.push({ url, image: imageData });
        localStorage.setItem('pinnedBookmarks', JSON.stringify(savedPins));
      }

      addPinBtn.addEventListener('click', function (e) {
        e.preventDefault();
        popup.style.display = 'block';
      });

      addBtn.addEventListener('click', function (e) {
        e.preventDefault();
        const urlInput = document.getElementById('pin-url').value;
        const imageInput = document.getElementById('pin-image').files[0];

        if (!urlInput.startsWith('https://')) {
          alert('URL must start with https://');
          return;
        }

        if (!imageInput) {
          alert('Please select an image');
          return;
        }

        const reader = new FileReader();
        reader.onload = function (e) {
          const imageData = e.target.result;
          createPinElement(urlInput, imageData);
          savePin(urlInput, imageData);
          popup.style.display = 'none';
          document.getElementById('pin-url').value = '';
          document.getElementById('pin-image').value = '';
        };
        reader.readAsDataURL(imageInput);
      });

      cancelBtn.addEventListener('click', function (e) {
        e.preventDefault();
        popup.style.display = 'none';
        document.getElementById('pin-url').value = '';
        document.getElementById('pin-image').value = '';
      });

      // Load pins when page loads
      window.addEventListener('load', loadSavedPins);

      // Search bar functionality
      document.getElementById('uv-form').addEventListener('submit', function (event) {
        event.preventDefault();
        const url = document.getElementById('uv-address').value;
        const isAUrl = url.includes('.');

        if (isAUrl) {
          let formattedUrl = url;
          if (!url.startsWith('http://') && !url.startsWith('https://')) {
            formattedUrl = 'https://' + url;
          }

          window.navigator.serviceWorker
            .register('/petezah/sw.js', {
              scope: __uv$config.prefix
            })
            .then(() => {
              window.location.href = __uv$config.prefix + __uv$config.encodeUrl(formattedUrl);
            });
        } else {
          const searchUrl = 'https://duckduckgo.com/?q=' + encodeURIComponent(url);
          window.navigator.serviceWorker
            .register('/petezah/sw.js', {
              scope: __uv$config.prefix
            })
            .then(() => {
              window.location.href = __uv$config.prefix + __uv$config.encodeUrl(searchUrl);
            });
        }
      });

      document.getElementById('uv-address').addEventListener('focus', function () {
        if (this.value && this.value.indexOf('.') !== -1) {
          this.value = 'https://' + this.value;
        }
      });

      document.getElementById('uv-address').addEventListener('blur', function () {
        this.value = this.value.replace(/^https?:\/\//, '');
      });
    </script>
    <script src="/storage/js/settings.js"></script>
  </body>
</html>
